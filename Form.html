<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Form Registrasi Karyawan - Demo</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* styling mirip screenshot: header hijau, card, spacing */
    body {
      background: #f7faf9;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      padding: 24px;
    }
    .topbar {
      background: #0e7b63;
      color: white;
      padding: 18px 24px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    .section-title {
      color: #0e7b63;
      font-weight: 600;
      margin-bottom: 12px;
    }
    .form-card {
      border-radius: 10px;
      box-shadow: 0 1px 6px rgba(16,24,40,0.05);
      padding: 20px;
      background: #fff;
    }
    .required { color: #d9534f; }
    .small-note { font-size: 0.9rem; color: #ecf1f5; }
    .btn-submit { background: #0e7b63; color: white; }
    .form-section { margin-bottom: 22px; }
    /* make radio & check spacing nicer */
    .form-check-label { margin-left: 6px; }
    /* responsive file input row */
    .file-row { gap: 12px; align-items: center; }
  </style>
</head>
<body>

  <div class="container">
    <div class="topbar">
      <h4 class="mb-0">Form Registrasi Karyawan</h4>
      <div class="small-note">Isi biodata selengkap-lengkapnya. Tanda (<span class="required">*</span>) wajib diisi.</div>
    </div>

    <div class="form-card">
      <form id="regForm" novalidate>
        <!-- Identitas Pribadi -->
        <div class="form-section">
          <div class="section-title">Identitas Pribadi</div>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Nama Lengkap (sesuai KTP) <span class="required">*</span></label>
              <input type="text" class="form-control" id="fullName" required placeholder="Contoh: Budi Santoso">
              <div class="invalid-feedback">Nama lengkap wajib diisi.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Nama Panggilan</label>
              <input type="text" class="form-control" id="nickName" placeholder="Nama panggilan">
            </div>

            <div class="col-md-6">
              <label class="form-label">NIK / No. KTP <span class="required">*</span></label>
              <input type="text" class="form-control" id="nik" inputmode="numeric" maxlength="16" placeholder="16 digit" required>
              <div class="form-text small-note">Masukkan tepat 16 digit angka.</div>
              <div class="invalid-feedback">NIK harus 16 digit.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">No. KK</label>
              <input type="text" class="form-control" id="nokk" maxlength="16" inputmode="numeric" placeholder="16 digit (opsional)">
            </div>

            <div class="col-md-6">
              <label class="form-label">Tempat Lahir <span class="required">*</span></label>
              <input type="text" class="form-control" id="birthPlace" required>
              <div class="invalid-feedback">Tempat lahir wajib diisi.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">Tanggal Lahir <span class="required">*</span></label>
              <input type="date" class="form-control" id="birthDate" required>
              <div class="invalid-feedback">Tanggal lahir wajib diisi.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Jenis Kelamin <span class="required">*</span></label>
              <div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="gender" id="male" value="Laki-laki" required>
                  <label class="form-check-label" for="male">Laki-laki</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="gender" id="female" value="Perempuan" required>
                  <label class="form-check-label" for="female">Perempuan</label>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Status Perkawinan <span class="required">*</span></label>
              <select class="form-select" id="marital" required>
                <option value="">Pilih...</option>
                <option>Belum Menikah</option>
                <option>Menikah</option>
                <option>Cerai</option>
              </select>
              <div class="invalid-feedback">Pilih status perkawinan.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Agama</label>
              <select class="form-select" id="agama">
                <option value="">Pilih...</option>
                <option>Islam</option><option>Kristen</option><option>Katolik</option>
                <option>Hindu</option><option>Budha</option><option>Kepercayaan</option>
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label">Golongan Darah</label>
              <select class="form-select" id="blood">
                <option value="">Pilih...</option>
                <option>A</option><option>B</option><option>AB</option><option>O</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Kontak & Alamat -->
        <div class="form-section">
          <div class="section-title">Kontak & Alamat</div>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Email <span class="required">*</span></label>
              <input type="email" class="form-control" id="email" placeholder="nama@domain.com" required>
              <div class="invalid-feedback">Email tidak valid.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label">No. HP/WhatsApp <span class="required">*</span></label>
              <input type="tel" class="form-control" id="phone" placeholder="+62xxxxxxxxxxx" required>
              <div class="form-text small-note">Gunakan kode negara, contoh: +62</div>
              <div class="invalid-feedback">Nomor HP wajib diisi.</div>
            </div>

            <div class="col-md-12">
              <label class="form-label">Alamat KTP <span class="required">*</span></label>
              <textarea class="form-control" id="alamatKTP" rows="2" required></textarea>
              <div class="invalid-feedback">Alamat KTP wajib diisi.</div>
            </div>

            <div class="col-md-12">
              <label class="form-label">Alamat Domisili (jika berbeda)</label>
              <textarea class="form-control" id="alamatDom" rows="2"></textarea>
            </div>

            <div class="col-md-4">
              <label class="form-label">Kota/Kabupaten</label>
              <input type="text" class="form-control" id="kota">
            </div>
            <div class="col-md-4">
              <label class="form-label">Provinsi</label>
              <input type="text" class="form-control" id="provinsi">
            </div>
            <div class="col-md-4">
              <label class="form-label">Kontak Darurat - Nama <span class="required">*</span></label>
              <input type="text" class="form-control" id="emName" required placeholder="Orang tua / Saudara">
              <div class="invalid-feedback">Nama kontak darurat wajib diisi.</div>
            </div>
            <div class="col-md-4">
              <label class="form-label">Kontak Darurat - No. HP <span class="required">*</span></label>
              <input type="tel" class="form-control" id="emPhone" required>
              <div class="invalid-feedback">Nomor kontak darurat wajib diisi.</div>
            </div>
            <div class="col-md-4">
              <label class="form-label">Hubungan</label>
              <input type="text" class="form-control" id="relation" placeholder="Orang tua / Suami/Istri / Teman">
            </div>
          </div>
        </div>

        <!-- Keluarga & Pendidikan -->
        <div class="form-section">
          <div class="section-title">Keluarga & Riwayat Pendidikan</div>
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Nama Ayah</label>
              <input type="text" class="form-control" id="father">
            </div>
            <div class="col-md-4">
              <label class="form-label">Nama Ibu</label>
              <input type="text" class="form-control" id="mother">
            </div>
            <div class="col-md-4">
              <label class="form-label">Jumlah Tanggungan</label>
              <input type="number" class="form-control" id="dependents" min="0">
            </div>

            <div class="col-12 mt-2">
              <label class="form-label">Riwayat Pendidikan (Minimal pendidikan terakhir)</label>
            </div>

            <div class="col-md-3">
              <select class="form-select" id="eduLevel">
                <option value="">Jenjang</option>
                <option>SMA/SMK</option><option>D3</option><option>S1</option><option>S2</option>
              </select>
            </div>
            <div class="col-md-5">
              <input type="text" class="form-control" id="eduSchool" placeholder="Nama Sekolah/Universitas">
            </div>
            <div class="col-md-2">
              <input type="text" class="form-control" id="eduMajor" placeholder="Jurusan/Prodi">
            </div>
            <div class="col-md-2">
              <input type="text" class="form-control" id="eduYear" placeholder="Tahun Lulus">
            </div>
          </div>
        </div>

        <!-- Pengalaman Kerja -->
        <div class="form-section">
          <div class="section-title">Pengalaman Kerja</div>
          <div class="row g-3">
            <div class="col-md-6">
              <input type="text" class="form-control" id="workCompany1" placeholder="Perusahaan">
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control" id="workPos1" placeholder="Posisi/Jabatan">
            </div>
            <div class="col-md-1">
              <input type="number" class="form-control" id="workStart1" placeholder="Mulai" min="1900" max="2100">
            </div>
            <div class="col-md-1">
              <input type="number" class="form-control" id="workEnd1" placeholder="Selesai" min="1900" max="2100">
            </div>

            <!-- tambahan baris kedua -->
            <div class="col-md-6">
              <input type="text" class="form-control" id="workCompany2" placeholder="Perusahaan">
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control" id="workPos2" placeholder="Posisi/Jabatan">
            </div>
            <div class="col-md-1">
              <input type="number" class="form-control" id="workStart2" placeholder="Mulai" min="1900" max="2100">
            </div>
            <div class="col-md-1">
              <input type="number" class="form-control" id="workEnd2" placeholder="Selesai" min="1900" max="2100">
            </div>
          </div>
        </div>

        <!-- Keahlian & Bahasa -->
        <div class="form-section">
          <div class="section-title">Keahlian & Bahasa</div>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Keahlian Utama</label>
              <input type="text" class="form-control" id="skills" placeholder="Contoh: Microsoft Excel, Java, Design Grafis">
            </div>
            <div class="col-md-3">
              <label class="form-label">Bahasa yang Dikuasai</label>
              <input type="text" class="form-control" id="languages" placeholder="Contoh: Indonesia (Aktif), Inggris (Pasif)">
            </div>
            <div class="col-md-3">
              <label class="form-label">Sertifikasi (opsional)</label>
              <input type="text" class="form-control" id="certs" placeholder="Contoh: CCNA 2023, PMP 2024">
            </div>
          </div>
        </div>

        <!-- Data Rekening & Administrasi -->
        <div class="form-section">
          <div class="section-title">Data Rekening & Administrasi</div>
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Nama Bank</label>
              <input type="text" class="form-control" id="bankName">
            </div>
            <div class="col-md-4">
              <label class="form-label">No. Rekening</label>
              <input type="text" class="form-control" id="bankNo">
            </div>
            <div class="col-md-4">
              <label class="form-label">Nama Pemilik Rekening</label>
              <input type="text" class="form-control" id="bankOwner">
            </div>
          </div>
        </div>

        <!-- Kesehatan singkat -->
        <div class="form-section">
          <div class="section-title">Informasi Kesehatan (Singkat)</div>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Riwayat Alergi/Penyakit (opsional)</label>
              <textarea class="form-control" id="allergy" rows="2"></textarea>
            </div>
            <div class="col-md-6">
              <label class="form-label">Kebutuhan Khusus/Disabilitas (opsional)</label>
              <textarea class="form-control" id="special" rows="2"></textarea>
            </div>
          </div>
        </div>

        <!-- Posisi Dilamar & Preferensi -->
        <div class="form-section">
          <div class="section-title">Posisi Dilamar & Preferensi</div>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Posisi Dilamar <span class="required">*</span></label>
              <input type="text" class="form-control" id="applyPos" required placeholder="Ketik atau pilih...">
              <div class="invalid-feedback">Posisi dilamar wajib diisi.</div>
            </div>
            <div class="col-md-3">
              <label class="form-label">Gaji Diharapkan (IDR/bulan)</label>
              <input type="number" class="form-control" id="salary" min="0" placeholder="Contoh: 5000000">
            </div>
            <div class="col-md-3">
              <label class="form-label d-block">Preferensi</label>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="shift">
                <label class="form-check-label" for="shift">Bersedia Shift</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="relocate">
                <label class="form-check-label" for="relocate">Bersedia Relokasi</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="dinas">
                <label class="form-check-label" for="dinas">Bersedia Dinas Luar</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Dokumen Pendukung -->
        <div class="form-section">
          <div class="section-title">Dokumen Pendukung</div>
          <div class="row g-3 align-items-center file-row">
            <div class="col-md-4">
              <label class="form-label">Pas Foto (JPG/PNG, maks 2MB) <span class="required">*</span></label>
              <input class="form-control" type="file" id="photoFile" accept="image/png, image/jpeg" required>
              <div class="invalid-feedback">Pas foto wajib diunggah (maks 2MB).</div>
            </div>
            <div class="col-md-4">
              <label class="form-label">CV/Resume (PDF, maks 5MB) <span class="required">*</span></label>
              <input class="form-control" type="file" id="cvFile" accept="application/pdf" required>
              <div class="invalid-feedback">CV wajib diunggah (PDF, maks 5MB).</div>
            </div>
            <div class="col-md-4">
              <label class="form-label">Portofolio (opsional, zip/pdf)</label>
              <input class="form-control" type="file" id="portFile" accept=".zip,application/pdf">
            </div>
          </div>
        </div>

        <!-- Pernyataan & Persetujuan -->
        <div class="form-section">
          <div class="section-title">Pernyataan & Persetujuan</div>
          <p class="small-note">Dengan mengirim formulir ini, saya menyatakan bahwa data yang saya berikan adalah benar dan dapat dipertanggungjawabkan.</p>

          <div class="row g-3 align-items-center">
            <div class="col-md-6">
              <label class="form-label">Tanda Tangan (ketik nama lengkap) <span class="required">*</span></label>
              <input type="text" class="form-control" id="signature" required>
              <div class="invalid-feedback">Tanda tangan digital wajib diisi.</div>
            </div>
            <div class="col-md-3">
              <label class="form-label">Tanggal Tanda Tangan <span class="required">*</span></label>
              <input type="date" class="form-control" id="signDate" required>
              <div class="invalid-feedback">Tanggal tanda tangan wajib diisi.</div>
            </div>
            <div class="col-md-3">
              <div class="form-check mt-4">
                <input class="form-check-input" type="checkbox" id="agree" required>
                <label class="form-check-label" for="agree">Saya menyetujui pemrosesan data pribadi.</label>
                <div class="invalid-feedback d-block">Anda harus menyetujui pemrosesan data.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- tombol -->
        <div class="d-flex justify-content-end gap-2">
          <button type="reset" class="btn btn-outline-secondary">Reset</button>
          <button type="submit" class="btn btn-submit">Kirim Pendaftaran</button>
        </div>
      </form>
    </div>

    <!-- notifikasi -->
    <div id="toastContainer" class="position-fixed bottom-0 end-0 p-3" style="z-index:1050"></div>
  </div>

  <!-- Bootstrap 5 JS bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Validation & file size checks
    (function () {
      const form = document.getElementById('regForm');

      function showToast(message, type = 'success') {
        const id = 't' + Date.now();
        const toastHTML = `
          <div id="${id}" class="toast align-items-center text-bg-${type === 'success' ? 'success' : 'danger'} border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
              <div class="toast-body text-white">${message}</div>
              <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
          </div>`;
        const container = document.getElementById('toastContainer');
        container.insertAdjacentHTML('beforeend', toastHTML);
        const tEl = new bootstrap.Toast(document.getElementById(id), { delay: 4000 });
        tEl.show();
        // remove after hidden
        document.getElementById(id).addEventListener('hidden.bs.toast', ()=> document.getElementById(id)?.remove());
      }

      function validNIK(val) {
        return /^\d{16}$/.test(val);
      }

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        // reset custom feedback
        document.getElementById('genderFeedback').style.display = 'none';

        // native constraint check
        if (!form.checkValidity()) {
          form.classList.add('was-validated');
          // show gender feedback if not selected
          const g = document.querySelector('input[name="gender"]:checked');
          if (!g) document.getElementById('genderFeedback').style.display = 'block';
          showToast('Periksa kembali form — ada field yang wajib diisi atau tidak valid.', 'danger');
          return;
        }

        // NIK check
        const nikVal = document.getElementById('nik').value.trim();
        if (!validNIK(nikVal)) {
          document.getElementById('nik').classList.add('is-invalid');
          showToast('NIK harus terdiri dari 16 digit angka.', 'danger');
          return;
        }

        // file size checks
        const photo = document.getElementById('photoFile').files[0];
        const cv = document.getElementById('cvFile').files[0];
        if (!photo || !cv) {
          showToast('Unggah pas foto dan CV.', 'danger');
          return;
        }
        if (photo.size > 2 * 1024 * 1024) {
          showToast('Ukuran pas foto melebihi 2MB.', 'danger');
          return;
        }
        if (cv.size > 5 * 1024 * 1024) {
          showToast('Ukuran CV melebihi 5MB.', 'danger');
          return;
        }

        // If all ok -> demo submit: collect minimal data and show success
        const data = new FormData(form);
        // convert to simple object for demo
        const out = {};
        data.forEach((v,k) => {
          if (v instanceof File) out[k] = v.name;
          else out[k] = v;
        });

        // (Temporarily) simpan ke localStorage sebagai demo
        try {
          const saved = JSON.parse(localStorage.getItem('registrations') || '[]');
          saved.push({ id: Date.now(), fullName: out.fullName || out.fullName, email: out.email, cv: out.cvFile, date: new Date().toISOString() });
          localStorage.setItem('registrations', JSON.stringify(saved));
        } catch(_) {}

        form.reset();
        form.classList.remove('was-validated');
        showToast('Data pendaftaran berhasil dikirim (demo).', 'success');

        // jika ingin kirim ke server: gunakan fetch POST ke endpoint
        // fetch('/api/register', { method: 'POST', body: data })
      });

      // optional: live NIK validation visual
      document.getElementById('nik').addEventListener('input', function() {
        const el = this;
        if (el.value.length === 16 && /^\d{16}$/.test(el.value)) {
          el.classList.remove('is-invalid'); el.classList.add('is-valid');
        } else { el.classList.remove('is-valid'); /* keep invalid handled on submit */ }
      });
    })();
  </script>
</body>
</html>